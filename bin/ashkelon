#!/bin/sh
#
# ashkelon:	Run ashkelon
#
# Heimir Thor Sverrisson 25.07.2002
#
#set -x
#
CMD=$1

# Default command is help (no arguments present)
if [ "$CMD" = "" ]
then
    CMD=HELP
fi

# The install directory root must be defined
if [ "$ASHK_HOME" = "" ]
then
    echo "ASHK_HOME not defined"
    exit 1
fi

# The Java home directory must be defined
if [ "$JAVA_HOME" = "" ]
then
    echo "JAVA_HOME not defined"
    exit 2
fi

CP=${JAVA_HOME}/lib/tools.jar:${ASHK_HOME}/build/ashkelon.jar:${ASHK_HOME}/db/mysql/mysql-connector-java-3.0.14-production-bin.jar:${ASHK_HOME}/db/postgres/pg74jdbc3.jar
for i in ${ASHK_HOME}/lib/*.jar
do
   CP=${CP}:$i 
done

if [ "$CMD" = "add" ]
then
    if [ "$SOURCEPATH" = "" ]
    then
	echo "SOURCEPATH not defined"
	exit 2
    fi
    SRCPATHINFO="-sourcepath ${SOURCEPATH}"
    CLASSPATHINFO="-classpath ${CLASSPATH}"

fi # CMD == add

# Shift argument list (if not empty) so we can use $* in command
if [ $# -gt 0 ]
then
    shift
fi

# got memory to burn on this box..
${JAVA_HOME}/bin/java -Xmx250m -cp $CP org.ashkelon.Ashkelon $CMD $SRCPATHINFO $CLSPATHINFO $*

